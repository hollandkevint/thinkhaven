@tailwind base;
@tailwind components;
@tailwind utilities;

/* Fonts loaded via next/font in layout.tsx:
   - Jost (--font-display): Futura-style sans-serif for headings
   - Libre Baskerville (--font-body): Readable serif for body text
   - JetBrains Mono (--font-mono): Monospace for code */

:root {
  /* ========================================
     ThinkHaven Design System
     Wes Anderson-inspired organic warmth
     ======================================== */

  /* Typography - Futura-style + Readable Serif */
  --font-display: 'Jost', 'Futura PT', 'Century Gothic', sans-serif;
  --font-body: 'Libre Baskerville', 'Georgia', serif;
  --font-mono: 'JetBrains Mono', 'IBM Plex Mono', monospace;

  /* Font Sizes */
  --text-xs: 0.75rem;      /* 12px - Caption */
  --text-sm: 0.875rem;     /* 14px - Small */
  --text-base: 1rem;       /* 16px - Body */
  --text-lg: 1.125rem;     /* 18px - Body Large */
  --text-xl: 1.375rem;     /* 22px - H3 */
  --text-2xl: 1.75rem;     /* 28px - H2 */
  --text-3xl: 2.25rem;     /* 36px - H1 */
  --text-4xl: 3rem;        /* 48px - Display */

  /* Line Heights */
  --leading-tight: 1.1;
  --leading-snug: 1.25;
  --leading-normal: 1.5;
  --leading-relaxed: 1.65;

  /* Font Weights */
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;

  /* ========================================
     Color Palette - Organic Warmth
     ======================================== */

  /* Primary Backgrounds */
  --cream: #FAF7F2;
  --parchment: #F5F0E6;

  /* Primary Accent */
  --terracotta: #C4785C;
  --terracotta-hover: #B56A4E;
  --terracotta-light: #D4917A;

  /* Secondary Accents */
  --forest: #4A6741;
  --forest-light: #5C7A53;
  --ink: #2C2416;
  --ink-light: #4A3D2E;

  /* Supporting Colors */
  --dusty-rose: #C9A9A6;
  --mustard: #D4A84B;
  --mustard-light: #E0BC6A;
  --slate-blue: #6B7B8C;
  --rust: #8B4D3B;
  --sage: #A3B18A;

  /* Sub-Persona Mode Indicators */
  --mode-inquisitive: #D4A84B;
  --mode-advocate: #8B4D3B;
  --mode-encouraging: #C9A9A6;
  --mode-realistic: #6B7B8C;

  /* Semantic Colors */
  --success: #4A6741;
  --warning: #D4A84B;
  --error: #8B4D3B;
  --info: #6B7B8C;

  /* shadcn/ui Compatibility - Mapped to Wes Anderson palette */
  --background: 38 40% 96%;        /* cream */
  --foreground: 38 35% 13%;        /* ink */
  --card: 40 45% 93%;              /* parchment */
  --card-foreground: 38 35% 13%;   /* ink */
  --popover: 40 45% 93%;           /* parchment */
  --popover-foreground: 38 35% 13%; /* ink */
  --primary: 18 45% 56%;           /* terracotta */
  --primary-foreground: 38 40% 96%; /* cream */
  --secondary: 40 45% 93%;         /* parchment */
  --secondary-foreground: 38 35% 13%; /* ink */
  --muted: 40 20% 88%;
  --muted-foreground: 210 14% 48%; /* slate-blue */
  --accent: 90 23% 62%;            /* sage */
  --accent-foreground: 38 35% 13%; /* ink */
  --destructive: 15 41% 39%;       /* rust */
  --destructive-foreground: 38 40% 96%; /* cream */
  --border: 38 20% 85%;
  --input: 38 20% 88%;
  --ring: 18 45% 56%;              /* terracotta */

  /* Spacing System - 8px grid */
  --space-1: 0.25rem;   /* 4px */
  --space-2: 0.5rem;    /* 8px */
  --space-3: 0.75rem;   /* 12px */
  --space-4: 1rem;      /* 16px */
  --space-5: 1.25rem;   /* 20px */
  --space-6: 1.5rem;    /* 24px */
  --space-8: 2rem;      /* 32px */
  --space-10: 2.5rem;   /* 40px */
  --space-12: 3rem;     /* 48px */
  --space-16: 4rem;     /* 64px */
  --space-20: 5rem;     /* 80px */

  /* Container Widths */
  --container-landing: 1200px;
  --container-app: 1400px;

  /* Border Radius - Organic, slightly rounded */
  --radius-sm: 0.25rem;   /* 4px */
  --radius: 0.5rem;       /* 8px */
  --radius-md: 0.75rem;   /* 12px */
  --radius-lg: 1rem;      /* 16px */
  --radius-xl: 1.5rem;    /* 24px */
  --radius-full: 9999px;

  /* Shadows - Warm, soft */
  --shadow-sm: 0 1px 2px rgba(44, 36, 22, 0.05);
  --shadow: 0 2px 8px rgba(44, 36, 22, 0.08);
  --shadow-md: 0 4px 16px rgba(44, 36, 22, 0.1);
  --shadow-lg: 0 8px 32px rgba(44, 36, 22, 0.12);
  --shadow-inner: inset 0 2px 4px rgba(44, 36, 22, 0.04);

  /* Transitions */
  --transition-fast: 150ms ease-out;
  --transition-base: 250ms ease-out;
  --transition-slow: 400ms ease-out;

  /* Dual-Pane Layout */
  --chat-pane: #FAF7F2;
  --canvas-pane: #F5F0E6;
  --divider: rgba(44, 36, 22, 0.12);

  /* Chat Interface */
  --chat-user-bg: #C4785C;
  --chat-user-fg: #FAF7F2;
  --chat-assistant-bg: #F5F0E6;
  --chat-assistant-fg: #2C2416;
  --chat-system-bg: #E0BC6A;

  /* Canvas Interface */
  --canvas-bg: #FAF7F2;
  --canvas-grid: rgba(44, 36, 22, 0.06);
  --canvas-selection: #C4785C;

  /* Board of Directors - Per-member accent colors */
  --board-mary: #C4785C;
  --board-victoria: #D4A84B;
  --board-casey: #4A6741;
  --board-elaine: #6B7B8C;
  --board-omar: #4A3D2E;
  --board-taylor: #C9A9A6;

  /* Charts - Wes Anderson palette */
  --chart-1: #C4785C;  /* terracotta */
  --chart-2: #4A6741;  /* forest */
  --chart-3: #D4A84B;  /* mustard */
  --chart-4: #6B7B8C;  /* slate-blue */
  --chart-5: #C9A9A6;  /* dusty-rose */

  /* Sidebar */
  --sidebar: #F5F0E6;
  --sidebar-foreground: #2C2416;
  --sidebar-primary: #C4785C;
  --sidebar-primary-foreground: #FAF7F2;
  --sidebar-accent: #A3B18A;
  --sidebar-accent-foreground: #2C2416;
  --sidebar-border: rgba(44, 36, 22, 0.1);
  --sidebar-ring: #C4785C;
}

/* Base Styles */
@layer base {
  * {
    border-color: hsl(var(--border));
  }

  html {
    color-scheme: light;
  }

  body {
    background-color: var(--cream);
    color: var(--ink);
    font-family: var(--font-body);
    font-size: var(--text-base);
    line-height: var(--leading-relaxed);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Headings use display font */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    font-weight: var(--font-medium);
    line-height: var(--leading-snug);
    color: var(--ink);
  }

  h1 {
    font-size: var(--text-3xl);
    letter-spacing: -0.01em;
  }

  h2 {
    font-size: var(--text-2xl);
    letter-spacing: -0.005em;
  }

  h3 {
    font-size: var(--text-xl);
  }

  h4 {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
  }

  /* Code uses mono font */
  code, pre, kbd {
    font-family: var(--font-mono);
  }

  /* Links */
  a {
    color: var(--terracotta);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  a:hover {
    color: var(--terracotta-hover);
  }

  /* Selection */
  ::selection {
    background: var(--terracotta-light);
    color: var(--cream);
  }
}

/* Component Styles */
@layer components {
  /* Buttons */
  .btn-primary {
    @apply px-6 py-3 font-medium transition-all;
    font-family: var(--font-display);
    background: var(--terracotta);
    color: var(--cream);
    border-radius: var(--radius);
    letter-spacing: 0.02em;
  }

  .btn-primary:hover {
    background: var(--terracotta-hover);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .btn-secondary {
    @apply px-6 py-3 font-medium transition-all;
    font-family: var(--font-display);
    background: transparent;
    color: var(--ink);
    border: 1.5px solid var(--ink);
    border-radius: var(--radius);
    letter-spacing: 0.02em;
  }

  .btn-secondary:hover {
    background: var(--ink);
    color: var(--cream);
  }

  /* Cards */
  .card {
    background: var(--parchment);
    border: 1px solid rgba(44, 36, 22, 0.1);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow);
  }

  .card-elevated {
    background: var(--cream);
    border: 1px solid rgba(44, 36, 22, 0.08);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
  }

  /* Dual-Pane Layout */
  .dual-pane-container {
    @apply grid h-screen transition-all duration-300 ease-in-out;
    grid-template-columns: minmax(400px, 60fr) minmax(300px, 40fr);
    gap: 1px;
    background: var(--divider);
  }

  .dual-pane-container.canvas-closed {
    grid-template-columns: 100% 0;
    gap: 0;
  }

  .dual-pane-container.canvas-closed .canvas-pane {
    padding: 0;
    opacity: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .chat-pane {
    @apply flex flex-col overflow-hidden;
    background: var(--chat-pane);
    padding: var(--space-6);
  }

  .canvas-pane {
    @apply flex flex-col overflow-hidden;
    background: var(--canvas-pane);
    padding: var(--space-6);
  }

  .pane-divider {
    @apply w-1 transition-colors cursor-col-resize;
    background: var(--divider);
  }

  .pane-divider:hover {
    background: var(--terracotta);
  }

  /* Chat Messages */
  .chat-message-user {
    @apply p-4 mb-4;
    background: var(--chat-user-bg);
    color: var(--chat-user-fg);
    border-radius: var(--radius-md) var(--radius-md) var(--radius-sm) var(--radius-md);
    box-shadow: var(--shadow-sm);
  }

  .chat-message-assistant {
    @apply p-4 mb-4;
    background: var(--chat-assistant-bg);
    color: var(--chat-assistant-fg);
    border: 1px solid rgba(44, 36, 22, 0.08);
    border-radius: var(--radius-md) var(--radius-md) var(--radius-md) var(--radius-sm);
  }

  .chat-message-system {
    @apply p-3 mb-3 text-sm;
    background: var(--chat-system-bg);
    color: var(--ink);
    border-radius: var(--radius);
    font-family: var(--font-display);
  }

  /* Sub-Persona Mode Badge */
  .mode-badge {
    @apply inline-flex items-center px-3 py-1;
    font-family: var(--font-display);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    letter-spacing: 0.05em;
    text-transform: uppercase;
    border-radius: var(--radius-full);
  }

  .mode-badge-inquisitive {
    background: rgba(212, 168, 75, 0.15);
    color: var(--mode-inquisitive);
  }

  .mode-badge-advocate {
    background: rgba(139, 77, 59, 0.15);
    color: var(--mode-advocate);
  }

  .mode-badge-encouraging {
    background: rgba(201, 169, 166, 0.25);
    color: #8A6B68;
  }

  .mode-badge-realistic {
    background: rgba(107, 123, 140, 0.15);
    color: var(--mode-realistic);
  }

  /* Viability Score */
  .viability-high {
    color: var(--forest);
  }

  .viability-medium {
    color: var(--mustard);
  }

  .viability-low {
    color: var(--rust);
  }

  /* Canvas Interface */
  .canvas-container {
    @apply flex-1 rounded-lg border;
    background: var(--canvas-bg);
    border-color: var(--canvas-grid);
    border-radius: var(--radius-md);
  }

  /* Strategic Framework Boxes */
  .strategic-framework {
    @apply p-6 mb-6;
    background: var(--parchment);
    border: 1px solid rgba(44, 36, 22, 0.12);
    border-radius: var(--radius-md);
  }

  .insight-highlight {
    @apply pl-4 py-2 my-4;
    border-left: 3px solid var(--terracotta);
    background: rgba(196, 120, 92, 0.05);
  }

  .action-item {
    @apply flex items-start gap-3 p-3 rounded-lg transition-colors;
  }

  .action-item:hover {
    background: rgba(196, 120, 92, 0.08);
  }

  /* Form Elements */
  .input {
    @apply w-full px-4 py-3 transition-all;
    font-family: var(--font-body);
    background: var(--cream);
    border: 1.5px solid rgba(44, 36, 22, 0.15);
    border-radius: var(--radius);
  }

  .input:focus {
    outline: none;
    border-color: var(--terracotta);
    box-shadow: 0 0 0 3px rgba(196, 120, 92, 0.15);
  }

  .input::placeholder {
    color: var(--slate-blue);
  }

  /* Board of Directors - Speaker Messages */
  .board-speaker-message {
    @apply flex items-start gap-3 max-w-[70%];
    border-left: 3px solid var(--board-mary);
    padding-left: var(--space-4);
  }

  .board-speaker-avatar {
    @apply w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0;
    font-family: var(--font-display);
    font-weight: var(--font-semibold);
    font-size: var(--text-sm);
    color: var(--cream);
  }

  .board-handoff {
    @apply flex items-center gap-3 my-4 px-4;
    font-family: var(--font-body);
    font-size: var(--text-sm);
    font-style: italic;
    color: var(--slate-blue);
  }

  .board-handoff::before,
  .board-handoff::after {
    content: '';
    flex: 1;
    height: 1px;
    background: rgba(44, 36, 22, 0.1);
  }

  .board-member-card {
    @apply flex items-center gap-3 p-3 rounded-lg;
    transition: background var(--transition-fast);
  }

  .board-member-card:hover {
    background: rgba(44, 36, 22, 0.04);
  }

  .board-member-card.active {
    background: rgba(44, 36, 22, 0.06);
  }

  .board-overview {
    @apply flex flex-col h-full;
    background: var(--canvas-pane);
    padding: var(--space-6);
  }

  /* Error Boundary */
  .error-boundary {
    @apply p-6 rounded-lg;
    background: rgba(139, 77, 59, 0.05);
    border: 1px solid var(--rust);
    color: var(--rust);
  }
}

/* Utility Classes */
@layer utilities {
  /* Typography utilities */
  .font-display {
    font-family: var(--font-display);
  }

  .font-body {
    font-family: var(--font-body);
  }

  .font-mono {
    font-family: var(--font-mono);
  }

  /* Color utilities */
  .text-ink {
    color: var(--ink);
  }

  .text-terracotta {
    color: var(--terracotta);
  }

  .text-forest {
    color: var(--forest);
  }

  .text-slate {
    color: var(--slate-blue);
  }

  .bg-cream {
    background-color: var(--cream);
  }

  .bg-parchment {
    background-color: var(--parchment);
  }

  .bg-terracotta {
    background-color: var(--terracotta);
  }

  /* Loading shimmer */
  .loading-shimmer {
    @apply animate-pulse;
    background: linear-gradient(90deg, var(--parchment) 25%, var(--cream) 50%, var(--parchment) 75%);
    background-size: 200% 100%;
  }
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-8px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.4s ease-out;
}

.animate-slideIn {
  animation: slideIn 0.3s ease-out;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Mobile Responsive */
@media (max-width: 767px) {
  :root {
    --text-3xl: 1.875rem;
    --text-2xl: 1.5rem;
  }

  .dual-pane-container {
    grid-template-columns: 1fr;
    grid-template-rows: 60vh 40vh;
  }

  .pane-divider {
    @apply h-1 w-full cursor-row-resize;
  }
}
